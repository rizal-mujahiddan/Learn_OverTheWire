mkdir -p /tmp/workdir && cp data.txt /tmp/workdir && cd /tmp/workdir && xxd -r data.txt > f && while ft=$(file f | grep -o -E 'gzip|bzip2|POSIX|ASCII' | grep -m1 .); do case $ft in gzip) mv f f.gz && gzip -d f.gz ;; bzip2) mv f f.bz2 && bzip2 -d f.bz2 ;; POSIX) tar -xf f && mv $(tar -tf f | grep -m1 .) f ;; ASCII) strings f | grep -E '\w{10,}' && break ;; *) break ;; esac; done && cd .. && rm -rf /tmp/workdir